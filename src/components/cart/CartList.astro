---
import type { CartItemExtends } from "@/interfaces/cart/cart-item-extends.interface";

interface Props {
  cartItems: CartItemExtends[];
}

const { cartItems } = Astro.props;
---

{
  cartItems.map((item) => (
    <div class="flex gap-5 mt-5">
      <img
        src={item.image}
        alt={item.title}
        class="w-20 h-20 object-contain cursor-pointer"
      />
      <div class="">
        <a href={`/store/cartItems/${item.slug}`} class="hover:underline">
          {item.title}
        </a>
        <p>$ {item.price}</p>
        <p>
          Talla: <span>{item.size}</span>
        </p>
        <p>
          Cantidad: <span>{item.quantity}</span>
        </p>
        <button 
          class="text-blue-500 btn-delete"
          data-id={item.productId}
          data-size={item.size} 
        >
            Remover
        </button>
      </div>
    </div>
  ))
}

<script>
  const deleteButtons:NodeListOf<HTMLButtonElement> = document.querySelectorAll(".btn-delete");

  deleteButtons.forEach((btn) => {
    btn.addEventListener("click", (event) => {
      //event.preventDefault();
      const target = event.target as HTMLButtonElement;
      const productId = target.dataset.id;
      const size = target.dataset.size;
      console.log("delete", productId, size);
    });
  });
  
</script>